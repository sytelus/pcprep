ls=dir \B %1
grevertall=git reset --hard ^& git reset --hard origin/master ^& git clean -f -d
grevertfile=git checkout -- $1
gstat=git status
gpush=git push
gpull=git pull
gpullr=git pull --rebase
gdiff=git difftool $*
gcommit=git add -A :/ ^& git commit -m $*
gtag=git tag -a $1 -m $2 ^& git push --tags
gcln=git clean -fdx
gdelbra=git push origin --delete $* ^& git branch -d $*
gconf=git diff --name-only --diff-filter=U
gviewcommits=git log --pretty=oneline  -n 10
gclean=git clean -fdx
gcreatebranch=git checkout -b $*
gdeletebranch=git push origin --delete $* ^& git branch -d $*
gpendingconf=git diff --name-only --diff-filter=U
gpendingcommits=git log --branches  @{u}..
gmaster=git checkout master
gsubmods=git submodule update --init --recursive
gbra=git checkout -b $1
glog=git log --pretty=oneline -10
grem=git remote -v
gbranch=git checkout -b $1
gcommithistory=git log --pretty=oneline -10
sshs=ssh shitals@$1 -t tmux new -A -s 0
jnb=jupyter notebook
pu=pushd .
po=popd
copynewfiles=robocopy $1 $2 /E /Z /DCOPY:DATE /V /FP /ETA /W:0 /R:0
mirfiles=robocopy $1 $2 /MIR /E /Z /DCOPY:DATE /V /FP /ETA /W:0 /R:0
gsrc=cd /d "d:\GitHubSrc\"
bashrt=cd /d "%LOCALAPPDATA%\lxss\rootfs"
claudeyolo=claude --dangerously-skip-permissions
gchk=git checkout $*
gmaster=git checkout master
gmain=git checkout main
dockerls=docker container ls
dockersize=docker ps --all --size
dockerclean=for /f %i in ('docker ps --filter status=exited -q') do @docker rm %i
torchver=python -c "import torch; print(torch.__version__)"
drives=wmic logicaldisk get size,freespace,caption
disks=wmic logicaldisk get size,freespace,caption
freespace=wmic logicaldisk get caption,freespace,size
psex=tasklist /v
pmy=tasklist /fi "username eq %USERNAME%"
k=kubectl $*
kpods=kubectl get pods -L created-by-name,submitter
kjobs=kubectl get vcjob -L created-by-name,submitter
kjobsall=kubectl get vcjob -L created-by-name,submitter
kpod=kubectl describe pod $*
kdel=kubectl delete vcjob $*
klog=kubectl logs -f $*
codexyolo=codex --yolo
undocommit=git reset --soft HEAD~1
kquota=kubectl describe resourcequota bonete61-compute-quota
kjob=kubectl get vcjob --show-labels $* ^& kubectl get pods -l volcano.sh/job-name=$*
knodes=powershell -NoProfile -Command "kubectl get nodes --no-headers | ForEach-Object { ($$_ -split '\s+')[1] } | Group-Object | Sort-Object Count -Descending | ForEach-Object { '{0,5} {1}' -f $$_.Count, $$_.Name }"
rclone-du=rclone size $*
clshard=cls
ipconfig=ipconfig /all
gstatall=powershell -NoProfile -Command "if (Get-Command mgitstatus -ErrorAction SilentlyContinue) { mgitstatus -e } else { git status }"
cpx=robocopy $1 $2 /E /Z /DCOPY:DATE /V /FP /ETA /W:0 /R:0
cpz=robocopy $1 $2 /E /Z /DCOPY:DATE /V /FP /ETA /W:0 /R:0
mvx=robocopy $1 $2 /E /MOV /Z /DCOPY:DATE /V /FP /ETA /W:0 /R:0
smv=robocopy $1 $2 /E /MOV /Z /DCOPY:DATE /V /FP /ETA /W:0 /R:0
findstr=findstr.exe /s /i /n /c:"$2" *.$1
realview=powershell -NoProfile -Command "Get-Content -Path '$1' -Wait"
treesize=powershell -NoProfile -Command "param($$target='.') $$items = Get-ChildItem -LiteralPath $$target -Force | Where-Object { $$_.Name -notmatch '^\.' }; $$result = foreach ($$i in $$items) { if ($$i.PSIsContainer) { $$size = (Get-ChildItem -LiteralPath $$i.FullName -File -Recurse -ErrorAction SilentlyContinue | Measure-Object -Sum Length).Sum } else { $$size = $$i.Length }; [pscustomobject]@{Name=$$i.Name; Size=$$size} }; $$result | Sort-Object Size -Descending | ForEach-Object { '{0,12:N0} {1}' -f $$_.Size, $$_.Name }" $1
checkin=set "GITMSG=$*" ^& powershell -NoProfile -Command "$$msg = $$env:GITMSG; if ($$msg) { $$msg = $$msg.Trim(); $$msg = $$msg.Trim([char]34) }; if (-not $$msg) { $$msg = 'update' }; git add -A; git commit -m $$msg; git push"
version=powershell -NoProfile -Command "Write-Host '=== Distribution ==='; $$os = Get-CimInstance Win32_OperatingSystem -ErrorAction SilentlyContinue; if ($$os) { Write-Host ('OS: {0} {1}' -f $$os.Caption, $$os.Version) } else { Write-Host 'OS: unknown' }; Write-Host ''; $$pyExe = $$null; $$pyVer = $$null; if (Get-Command python -ErrorAction SilentlyContinue) { $$pyPath = (Get-Command python).Source; if ($$pyPath -notlike '*WindowsApps*') { $$pyExe = 'python'; $$pyVer = python -c 'import sys; print(sys.version)' 2>$$null } } if (-not $$pyExe -and (Get-Command python3 -ErrorAction SilentlyContinue)) { $$pyExe = 'python3'; $$pyVer = python3 -c 'import sys; print(sys.version)' 2>$$null } if ($$pyExe) { if (-not $$pyVer) { $$pyVer = 'unknown' }; $$pyPath = (Get-Command $$pyExe).Source; Write-Host ('Python: {0} ({1})' -f $$pyVer.Trim(), $$pyPath) } else { Write-Host 'Python: not found' } if ($$pyExe) { if ($$pyExe -eq 'python') { $$tver = python -c 'import torch; print(torch.__version__)' 2>$$null } else { $$tver = python3 -c 'import torch; print(torch.__version__)' 2>$$null } if ($$LASTEXITCODE -eq 0 -and $$tver) { Write-Host ('PyTorch: {0}' -f $$tver.Trim()) } else { Write-Host ('PyTorch: not installed for {0}' -f $$pyExe) } } else { Write-Host 'PyTorch: Python interpreter not available' } if (Get-Command nvidia-smi -ErrorAction SilentlyContinue) { $$drv = nvidia-smi --query-gpu=driver_version --format=csv,noheader 2>$$null | Select-Object -First 1; if ($$drv) { Write-Host ('NVIDIA Driver: {0}' -f $$drv.Trim()) } else { Write-Host 'NVIDIA Driver: detected but version unavailable' } } else { Write-Host 'NVIDIA Driver: nvidia-smi not found' } if (Get-Command nvcc -ErrorAction SilentlyContinue) { $$nvccPath = (Get-Command nvcc).Source; $$cudaLine = nvcc --version 2>$$null | Select-String -Pattern 'release' | Select-Object -First 1; if ($$cudaLine) { $$cuda = ($$cudaLine.ToString() -replace '.*release\s+','') -split ',' | Select-Object -First 1 } else { $$cuda = 'unknown' }; Write-Host ('CUDA Toolkit: version {0} (nvcc: {1})' -f $$cuda, $$nvccPath) } else { Write-Host 'CUDA Toolkit: nvcc not found' }"
removepass=powershell -NoProfile -Command "if (-not (Get-Command ssh-keygen -ErrorAction SilentlyContinue)) { Write-Host 'ssh-keygen not found'; return }; $$ssh = Join-Path $$env:USERPROFILE '.ssh'; if (-not (Test-Path $$ssh)) { Write-Host 'No .ssh directory found'; return }; Get-ChildItem -Path $$ssh -File -ErrorAction SilentlyContinue | Where-Object { ($$_.Name -like 'id_*' -or $$_.Name -like 'sb_*') -and $$_.Extension -ne '.pub' } | ForEach-Object { ssh-keygen -l -f $$_.FullName >$$null 2>$$null; if ($$LASTEXITCODE -eq 0) { Write-Host ('Processing: {0}' -f $$_.FullName); ssh-keygen -p -f $$_.FullName } }"
nvreset=powershell -NoProfile -Command "if (Get-Command nvidia-smi -ErrorAction SilentlyContinue) { nvidia-smi --gpu-reset -i 0 2>$$null; if ($$LASTEXITCODE -ne 0) { Write-Host 'nvidia-smi gpu reset failed or unsupported' } } else { Write-Host 'nvidia-smi not found' }"
start-tmux=powershell -NoProfile -Command "if (Get-Command wsl -ErrorAction SilentlyContinue) { wsl -e tmux attach-session -t ssh_tmux 2>$$null; if ($$LASTEXITCODE -ne 0) { wsl -e tmux new-session -s ssh_tmux 2>$$null; if ($$LASTEXITCODE -ne 0) { Write-Host 'tmux not available in WSL' } } } else { Write-Host 'WSL not available' }"
tmuxx=powershell -NoProfile -Command "if (Get-Command wsl -ErrorAction SilentlyContinue) { wsl -e tmux attach-session -t ssh_tmux 2>$$null; if ($$LASTEXITCODE -ne 0) { wsl -e tmux new-session -s ssh_tmux 2>$$null; if ($$LASTEXITCODE -ne 0) { Write-Host 'tmux not available in WSL' } } } else { Write-Host 'WSL not available' }"
z=powershell -NoProfile -Command "if (Get-Command zellij -ErrorAction SilentlyContinue) { zellij a } elseif (Get-Command wsl -ErrorAction SilentlyContinue) { wsl -e zellij a 2>$$null; if ($$LASTEXITCODE -ne 0) { Write-Host 'zellij not available' } } else { Write-Host 'zellij not available' }"
sdrained=powershell -NoProfile -Command "$$json = $$null; if (Get-Command scontrol -ErrorAction SilentlyContinue) { $$json = scontrol show --json node 2>$$null } elseif (Get-Command wsl -ErrorAction SilentlyContinue) { $$json = wsl -e scontrol show --json node 2>$$null } else { Write-Host 'slurm not available' }; if ($$json) { try { $$data = $$json | ConvertFrom-Json } catch { Write-Host 'Failed to parse scontrol JSON'; return }; foreach ($$n in $$data.nodes) { if ($$n.state -contains 'DRAIN') { '{0}`t{1}' -f $$n.hostname, $$n.reason } } }"
sreason=powershell -NoProfile -Command "$$json = $$null; if (Get-Command scontrol -ErrorAction SilentlyContinue) { $$json = scontrol show --json node 2>$$null } elseif (Get-Command wsl -ErrorAction SilentlyContinue) { $$json = wsl -e scontrol show --json node 2>$$null } else { Write-Host 'slurm not available' }; if ($$json) { try { $$data = $$json | ConvertFrom-Json } catch { Write-Host 'Failed to parse scontrol JSON'; return }; foreach ($$n in $$data.nodes) { if ($$n.reason -and $$n.reason -ne '') { '{0}`t{1}`t{2}' -f $$n.hostname, ($$n.state -join ','), $$n.reason } } }"
sjobs=powershell -NoProfile -Command "$$fmt = '%%.7i %%.9P %%.8j %%.8u %%.2t %%.10M %%.6D %%R'; if (Get-Command squeue -ErrorAction SilentlyContinue) { squeue -o $$fmt -u $$env:USERNAME } elseif (Get-Command wsl -ErrorAction SilentlyContinue) { wsl -e squeue -o $$fmt -u $$env:USERNAME } else { Write-Host 'slurm not available' }"
salljobs=powershell -NoProfile -Command "$$fmt = '%%.18i %%.8u %%.6D %%.16S %%.8P'; if (Get-Command squeue -ErrorAction SilentlyContinue) { squeue -o $$fmt } elseif (Get-Command wsl -ErrorAction SilentlyContinue) { wsl -e squeue -o $$fmt } else { Write-Host 'slurm not available' }"
skillall=powershell -NoProfile -Command "$$confirm = Read-Host 'Are you sure you want to cancel all Slurm jobs? (y/N)'; if ($$confirm -match '^(y|yes)$') { if (Get-Command scancel -ErrorAction SilentlyContinue) { scancel -u $$env:USERNAME; Write-Host ('All Slurm jobs for user {0} have been cancelled' -f $$env:USERNAME) } elseif (Get-Command wsl -ErrorAction SilentlyContinue) { wsl -e scancel -u $$env:USERNAME; Write-Host ('All Slurm jobs for user {0} have been cancelled' -f $$env:USERNAME) } else { Write-Host 'slurm not available' } } else { Write-Host ('Operation cancelled or no jobs found for user {0}' -f $$env:USERNAME) }"
